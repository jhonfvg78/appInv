<!DOCTYPE html>

<html lang="en" class="light-style layout-menu-fixed" dir="ltr" data-theme="theme-default" data-assets-path="/"
  data-template="vertical-menu-template-free">

@include('partials/head')

<body>
  <!-- Layout wrapper -->
  <div class="layout-wrapper layout-content-navbar">
    <div class="layout-container">

      <!-- Menu -->
      @include('partials/aside')
      <!-- / Menu -->

      <!-- Layout container -->
      <div class="layout-page">
        <!-- Navbar -->
        @include('partials/header')
        <!-- / Navbar -->

        <!-- Content wrapper -->
        <div class="content-wrapper">
          <!-- Content -->
          <div class="container mt-3">


            <div class="container-xxl flex-grow-1 container-p-y">
              <h4 class="fw-bold py-3 mb-4"><span class="text-muted fw-light">Actualizar /</span> Item</h4>

              <div class="row">
                <div class="col-md-12">
                  <ul class="nav nav-pills flex-column flex-md-row mb-3">
                    <li class="nav-item">
                      <a class="nav-link active" href="javascript:void(0);"><i class='bx bxs-component me-1'></i>
                        Item</a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link" href="pages-account-settings-notifications.html"><i
                          class='bx bx-list-ol me-1'></i>
                        Historial Préstamos</a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link" href="pages-account-settings-connections.html"><i
                          class='bx bxs-wrench me-1'></i></i>Historial Mantenimiento</a>
                    </li>
                  </ul>
                  <div class="card mb-4">

                    <div class="card-body">                      
                      <form action="/item/udpate/{{item.id}}" method="POST">
                        @if( flashMessages.get('errors.quantity') )
                        <div class="alert alert-danger" id="alert" role="alert">
                          Error
                        </div>
                        <script type="text/javascript">
                          setTimeout(function () {
                            $('#alert').alert('close');
                          }, 1000);
                        </script>
                        @end
                        <div class="row">
                          <div class="col">
                            <div class="d-flex align-items-start align-items-sm-center gap-4">
                              <a class="example-image-link" href="{{ item.image }}" data-lightbox="roadtrip">
                                <img src="{{item.image}}" class="d-block rounded border" height="120"  id="itemImage"/>
                              </a>
                            </div>
                          </div>
                          <div class="col">
                            <div class="mb-3 col-md">
                              <label for="image" class="form-label">URL Image</label>
                              <div class="input-group">
                                <input type="text" class="form-control" id="image" name="image" onchange="updateImage()"
                                  value="{{item.image}}" />
                                <button class="btn btn-outline-secondary" type="button" onclick="clearImage()"
                                  id="button-addon2">Borrar</button>
                              </div>
                            </div>

                            <div class="mb-3 col-md">
                              <label for="datasheet" class="form-label">URL Datasheet</label>
                              <div class="input-group">
                                <input type="text" class="form-control" id="datasheet" name="datasheet"
                                  onchange="updateImage()" value="{{item.datasheet}}" />
                                <button class="btn btn-outline-secondary" type="button"
                                  id="button-addon2">Borrar</button>
                              </div>
                            </div>
                          </div>
                        </div>

                        <div class="row">
                          <div class="mb-3 col-md-6">
                            <label for="tag" class="form-label">Tag</label>
                            <div class="input-group">
                              <input class="form-control" type="text" id="tag" name="tag" autofocus
                                style="text-transform:uppercase" required value="{{item.tag}}" />
                              <button class="btn btn-outline-secondary" type="button" id="button-addon2"
                                onclick="genId()">Generar</button>
                            </div>

                          </div>

                          <div class="mb-3 col-md-6">
                            <label for="reference" class="form-label">Referencia</label>
                            <input class="form-control" type="text" name="reference" id="reference"
                              value="{{item.reference}}" required />
                          </div>

                          <div class="mb-3 col-md-6">
                            <label for="category" class="form-label">Categoría</label>
                            <div class="input-group">
                              <button class="btn btn-outline-secondary" type="button" id="button-addon2"><i
                                  class='bx bx-message-square-add'></i></i></button>
                              <select id="category" name="category" class="form-select">
                                <option value="Ninguna">Ninguna</option>
                                @each(category in categories)
                                  @if(category.name==item.category)
                                  <option value="{{category.name}}" selected>{{category.name}}</option>
                                  @else                                  
                                  <option value="{{category.name}}">{{category.name}}</option>
                                  @end
                                @end
                              </select>
                            </div>
                          </div>

                          <div class="mb-3 col-md-6">
                            <label for="quantity" class="form-label">Cantidad</label>
                            <input type="number" class="form-control" id="quantity" name="quantity" min="0"
                              value="{{item.quantity}}" required />
                          </div>

                          <div class="mb-3 col-md-6">
                            <label for="location" class="form-label">Ubicación</label>
                            <input type="text" class="form-control" id="location" name="location"
                              style="text-transform:uppercase" value="{{item.location}}" />
                          </div>                         

                          <div class="mb-3 col-md">
                            <label for="description" class="form-label">Descripción</label>
                            <textarea class="form-control" id="description" name="description" rows="2"
                              value="{{item.maintenance}}"></textarea>
                          </div>

                        </div>

                        <div class="mt-2">
                          <button type="submit" class="btn btn-info me-2">Actualizar</button>
                          <a href="javascript:history.back()" class="btn btn-primary">Cancelar</a>
                        </div>
                      </form>

                    </div>
                    <!-- /Account -->
                  </div>

                </div>
              </div>
            </div>




            <!-- / Content -->
            @include('partials/footer')
            <!-- Footer -->

            <!-- / Footer -->

            <div class="content-backdrop fade"></div>
          </div>
          <!-- Content wrapper -->
        </div>
        <!-- / Layout page -->
      </div>

      <!-- Overlay -->
      <div class="layout-overlay layout-menu-toggle"></div>
    </div>
    <!-- / Layout wrapper -->

    @include('partials/scripts')

    <!-- ScriptItems -->
    <script src="/pages/item.js"></script>
</body>

</html>